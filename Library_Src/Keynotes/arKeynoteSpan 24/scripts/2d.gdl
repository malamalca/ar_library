SPACING = 0.05define style "internal" stFont, iFontSize, 5, 0set style "internal"width = stw (GLOB_ID) / 1000 * GLOB_SCALEn = request ("Height_of_style", "internal", height)height = height / 1000 * GLOB_SCALEunId = 1if kind = 0 then	! label	hotspot2 0,0, unId: unId = unId + 1	circle2 0, 0, SPACING/2	line2 0, 0, dx1, dy1	line2 dx1, dy1, dx1+dx2, dy1	if dx2 > 0 then		add2 dx1+dx2 + width/2+SPACING, dy1	else		add2 dx1+dx2 - width/2 - SPACING, dy1	endif	text2 0, 0, GLOB_ID	poly2 6, 1+4,		-SPACING - width/2, 0,		-width/2, height/2,		width/2, height/2,		SPACING + width/2, 0,		width/2, -height/2,		-width/2, -height/2	del 1	hotspot2 0, dy1, unId, dx1, 1: unId = unId + 1	hotspot2 dx1, dy1, unId, dx1, 2: unId = unId + 1	hotspot2 -1, dy1, unId, dx1, 3: unId = unId + 1	hotspot2 dx1, 0, unId, dy1, 1+128: unId = unId + 1	hotspot2 dx1, dy1, unId, dy1, 2: unId = unId + 1	hotspot2 dx1, -1, unId, dy1, 3: unId = unId + 1	hotspot2 dx1, dy1, unId, dx2, 1: unId = unId + 1	hotspot2 dx1+dx2, dy1, unId, dx2, 2: unId = unId + 1	hotspot2 dx1-1, dy1, unId, dx2, 3: unId = unId + 1!	add2 A/2, B/2!!	hotspot2 0,0, unId: unId = unId + 1!!	!	text2 0, 0, GLOB_ID!	poly2 6, 1+4,!		-SPACING - width/2, 0,!		-width/2, height/2,!		width/2, height/2,!		SPACING + width/2, 0,!		width/2, -height/2,!		-width/2, -height/2!!	if dx1 > 0 then!		startX = width/2+SPACING !		startFactor = 1!	else!		startX = -width/2-SPACING !		startFactor = -1!	endif!!	line2 startX, 0, startX + dx1, 0 !!	hotspot2 startX, 0, unId, dx1, 1: unId = unId + 1!	hotspot2 startX + dx1, 0, unId, dx1, 2: unId = unId + 1!	hotspot2 startX - dx1 * startFactor, 0, unId, dx1, 3: unId = unId + 1!!	line2 startX + dx1, 0, startX + dx1 + dx2, dy2!!	hotspot2 startX + dx1, dy2, unId, dx2, 1+128: unId = unId + 1!	hotspot2 startX + dx1 + dx2, dy2, unId, dx2, 2: unId = unId + 1!	hotspot2 startX + dx1 -1, dy2, unId, dx2, 3: unId = unId + 1!!	hotspot2 startX + dx1 + dx2, 0, unId, dy2, 1+128: unId = unId + 1!	hotspot2 startX + dx1 + dx2, dy2, unId, dy2, 2: unId = unId + 1!	hotspot2 startX + dx1 + dx2, -1, unId, dy2, 3: unId = unId + 1!!!	circle2 startX + dx1 + dx2, dy2, SPACING/2!	del 1endifif kind = 1 then	! diagonal	diagLength = sqr(A*A + B*B)	diagAngle = atn(B/A)    		!rect2 0,0, A, B	add2 A/2, B/2	rot2 diagAngle 		text2 0, 0, GLOB_ID	poly2 6, 1+4,		-SPACING - width/2, 0,		-width/2, height/2,		width/2, height/2,		SPACING + width/2, 0,		width/2, -height/2,		-width/2, -height/2	del 2	linePartLen = (diagLength - (width+2*SPACING)) / 2	line2 0, 0, linePartLen * cos(diagAngle), linePartLen  * sin(diagAngle)	line2 A, B, A - linePartLen * cos(diagAngle), B - linePartLen  * sin(diagAngle)endifif kind = 3 then	text2 0, 0, GLOB_ID			!rect2 -width/2 - SPACING, height/2, width/2 + SPACING, -height/2	poly2 6, 1+4,		-SPACING - width/2, 0,		-width/2, height/2,		width/2, height/2,		SPACING + width/2, 0,		width/2, -height/2,		-width/2, -height/2		if bLockAngles then		!dX2 = dX1		dY2 = dY1	endif		line2 -width/2 - SPACING, 0, - dX1, dY1	line2 width/2 + SPACING, 0, + dX2, dY2		unId = 1		hotspot2 0, 0, unId: unId = unId + 1		HOTSPOT2 -dX1, 0, unId, dY1, 1+128: unId = unId + 1	HOTSPOT2 -dX1, -1, unId, dY1, 3: unId = unId + 1	HOTSPOT2 -dX1, dY1, unId, dY1, 2: unId = unId + 1		HOTSPOT2 0, dY1, unId, dX1, 1+128: unId = unId + 1	HOTSPOT2 1, dY1, unId, dX1, 3: unId = unId + 1	HOTSPOT2 -dX1, dY1, unId, dX1, 2: unId = unId + 1		HOTSPOT2 dX2, 0, unId, dY2, 1+128: unId = unId + 1	HOTSPOT2 dX2, -1, unId, dY2, 3: unId = unId + 1	HOTSPOT2 dX2, dY2, unId, dY2, 2: unId = unId + 1		HOTSPOT2 0, dY2, unId, dX2, 1+128: unId = unId + 1	HOTSPOT2 -1, dY2, unId, dX2, 3: unId = unId + 1	HOTSPOT2 dX2, dY2, unId, dX2, 2: unId = unId + 1	!text2 0, 0.3, ">"+longText+"<"endif