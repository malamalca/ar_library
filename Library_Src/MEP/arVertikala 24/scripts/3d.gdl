uid = 1! current pointsMODEL SOLID! chop off for floorplansIF GLOB_CONTEXT = 2 THEN	ADDZ GLOB_CSTORY_ELEV+ZZYZX	CUTPLANE{2} 0, 0	DEL 1		ADDZ GLOB_CSTORY_ELEV+ZZYZX-0.1	CUTPLANE{2} 0, 1 				! below	DEL  1 ENDIF prevbAngle = 0FOR i = 1 TO nSegments	direction = directions[i]	tXb = COS(direction+90)	tYb = SIN(direction+90)	tXe = -COS(direction+90)	tYe = -SIN(direction+90)	angle = angles[i]/2	SPRISM_{2} mat, mat, mat,		12,		tXb, tYb, tXe, tYe, segments[i], angle, 		! top vector		-A/2, 0, A/2, 0, 0, prevbAngle,					! bottom vector               -A/2, 0,     13+66, mat,        0, 0,    900,  mat,                   0,          180,   4013+66,  mat,        0, 0,    900,  mat,                   0,          180,   4013+66,  mat,               -A/2, 0,     -1,  mat,                A/2 - wallThickness, 0,     13+66,  mat,        0, 0,    900+66,  mat,                   0,         -180,   4013+66,  mat,        0, 0,    900,  mat,                   0,         -180,   4013+66,  mat,                A/2 - wallThickness, 0,     -1, mat	prevbAngle = angle 	! length editing	HOTSPOT 0, 0, 0, uid, segments[i], 1: uid = uid + 1	HOTSPOT 0, 0, segments[i], uid, segments[i], 2: uid = uid + 1	HOTSPOT 0, 0, -1, uid, segments[i], 3: uid = uid + 1	! direction editing	HOTSPOT A/2, 0, segments[i], uid, directions[i], 4: uid = uid + 1	HOTSPOT COS(directions[i])*A/2, SIN(directions[i])*A/2, segments[i], uid, directions[i], 5: uid = uid + 1	HOTSPOT 0, 0, segments[i], uid, directions[i], 6: uid = uid + 1	HOTSPOT 0, 0, segments[i]+1, uid, directions[i], 7: uid = uid + 1	ADDZ segments[i]	! angle editing - at half of segment length	angleSpotPos = segments[i+1]/2	HOTSPOT 0, 0, angleSpotPos, uid, angles[i], 4: uid = uid + 1	HOTSPOT COS(directions[i])*angleSpotPos*SIN(angles[i]), SIN(directions[i])*angleSpotPos*SIN(angles[i]), angleSpotPos*COS(angles[i]), uid, angles[i], 5: uid = uid + 1	HOTSPOT 0, 0, 0, uid, angles[i], 6: uid = uid + 1	HOTSPOT 0, 1, 0, uid, angles[i], 7: uid = uid + 1		!! debug	!CIRCLE 0.1	!LIN_ tXb, tYb, 0, tXe, tYe, 0		HOTSPOT COS(direction)*A, SIN(direction)*A, 0	ROTZ 90+direction	ROTX angles[i]	!! debug	!LIN_ prevbXb, prevbYb , 0, prevbXe , prevbYe , 0NEXT iIF GLOB_CONTEXT = 2 THEN	CUTEND 	CUTENDENDIF 