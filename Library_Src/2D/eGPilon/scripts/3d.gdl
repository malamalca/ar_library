unId = 1! **** POLYGONIA  **** !! ** A.Muttenthaler ** !! ** modified by GS ** !if n[polyKind] < 2 then end!-------------------------base polygon--------------------------polyIndex = POLYKIND_BASEparameterIndex = POLYKIND_BASE! edit height hotspothotspot x[polyIndex][1], y[polyIndex][1], 0, unId, buildingElevation, 1: unId = unId + 1hotspot x[polyIndex][1], y[polyIndex][1], buildingElevation, unId, buildingElevation, 2: unId = unId + 1hotspot x[polyIndex][1], y[polyIndex][1], -1, unId, buildingElevation, 3: unId = unId + 1x0 = x[polyIndex][n[polyIndex]]y0 = y[polyIndex][n[polyIndex]]pen polyPen[parameterIndex]set line_type polyLineType[parameterIndex]for i = 1 to n[polyIndex]	put x[polyIndex][i], y[polyIndex][i], 0next iset material buildingSurface[parameterIndex]plane n[polyIndex], get(n[polyIndex] * 3) !----------------------end base polygon-----------------------!-------------------------building polygon--------------------polyIndex = POLYKIND_BUILDINGparameterIndex = POLYKIND_BUILDINGif buildingEqualsBase then	polyIndex = POLYKIND_BASEendifaddz buildingElevation! edit height hotspothotspot x[polyIndex][1], y[polyIndex][1], 0, unId, buildingHeight, 1: unId = unId + 1hotspot x[polyIndex][1], y[polyIndex][1], buildingHeight, unId, buildingHeight, 2: unId = unId + 1hotspot x[polyIndex][1], y[polyIndex][1], -1, unId, buildingHeight, 3: unId = unId + 1x0 = x[polyIndex][n[polyIndex]]y0 = y[polyIndex][n[polyIndex]]pen polyPen[parameterIndex]set line_type polyLineType[parameterIndex]for i = 1 to n[polyIndex]	put x[polyIndex][i], y[polyIndex][i]next iset material buildingSurface[parameterIndex]prism n[polyIndex], buildingHeight, get(n[polyIndex] * 2) del top!----------------------end building polygon-------------------!-------------------------basement polygon--------------------if abs(basementHeight) < nix then endpolyIndex = POLYKIND_BASEMENTparameterIndex = POLYKIND_BASEMENTif basementEqualsBase then	polyIndex = POLYKIND_BASEendifaddz buildingElevation - basementHeight! edit height hotspothotspot x[polyIndex][1], y[polyIndex][1], basementHeight, unId, basementHeight, 1: unId = unId + 1hotspot x[polyIndex][1], y[polyIndex][1], 0, unId, basementHeight, 2: unId = unId + 1hotspot x[polyIndex][1], y[polyIndex][1], basementHeight+1, unId, basementHeight, 3: unId = unId + 1x0 = x[polyIndex][n[polyIndex]]y0 = y[polyIndex][n[polyIndex]]pen polyPen[parameterIndex]set line_type polyLineType[parameterIndex]for i = 1 to n[polyIndex]	put x[polyIndex][i], y[polyIndex][i]next iset material buildingSurface[parameterIndex]prism n[polyIndex], basementHeight, get(n[polyIndex] * 2) !----------------------end basement polygon-------------------